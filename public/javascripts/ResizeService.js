"use strict";function ResizeService(t,e,f,s,o,a,i){var n=!1,l=!1,h=function(t){t.preventDefault(),"seHandle"===t.target.id&&(n=!0),"nwHandle"===t.target.id&&(l=!0)},c=function(a){if(n===!0){a.preventDefault(),a.target.style.cursor="nwse-resize";var i=t.offsetHeight-(t.offsetHeight+t.offsetTop-a.clientY),h=t.offsetWidth-(t.offsetWidth+t.offsetLeft-a.clientX);t.style.height=i+"px",t.style.width=h+"px",f.style.top=t.offsetTop-f.offsetHeight+"px",f.style.left=t.offsetLeft-f.offsetWidth+"px",s.style.top=t.offsetTop+t.offsetHeight+"px",s.style.left=t.offsetLeft+t.offsetWidth+"px",o.style.top=t.offsetTop-o.offsetHeight+"px",o.style.left=(t.offsetWidth-o.offsetWidth)/2+t.offsetLeft+"px"}else if(l===!0){a.preventDefault(),a.target.style.cursor="nwse-resize";var c=t.offsetLeft-(t.offsetLeft-a.clientX),p=t.offsetTop-(t.offsetTop-a.clientY),d=t.offsetWidth+(t.offsetLeft-c),v=t.offsetHeight+(t.offsetTop-p),r=canvas.offsetLeft+(t.offsetLeft-c),u=canvas.offsetTop+(t.offsetTop-p);t.style.left=c+"px",t.style.top=p+"px",t.style.width=d+"px",t.style.height=v+"px",e.canvas.style.left=r+"px",e.canvas.style.top=u+"px",f.style.top=t.offsetTop-f.offsetHeight+"px",f.style.left=t.offsetLeft-f.offsetWidth+"px",s.style.top=t.offsetTop+t.offsetHeight+"px",s.style.left=t.offsetLeft+t.offsetWidth+"px",o.style.top=t.offsetTop-o.offsetHeight+"px",o.style.left=(t.offsetWidth-o.offsetWidth)/2+t.offsetLeft+"px"}},p=function(f){if(f.preventDefault(),n===!0){n=!1,e.canvas.style.cursor="pointer",document.body.style.cursor="default";var s=e.canvas.toDataURL();e.canvas.width=t.offsetWidth,e.canvas.height=t.offsetHeight,e.fillStyle="#ffffff",e.fillRect(0,0,e.canvas.width,e.canvas.height),e.lineWidth=a.value,e.strokeStyle=i.value,e.lineJoin=e.lineCap="round";var o=new Image;o.onload=function(){e.drawImage(o,0,0,e.canvas.width,e.canvas.height,0,0,e.canvas.width,e.canvas.height)},o.src=s}else l===!0&&!function(){l=!1,e.canvas.style.cursor="pointer",document.body.style.cursor="default";var f=e.canvas.toDataURL();e.canvas.width=t.offsetWidth,e.canvas.height=t.offsetHeight,e.canvas.style.left="0px",e.canvas.style.top="0px",e.fillStyle="#ffffff",e.fillRect(0,0,e.canvas.width,e.canvas.height),e.lineWidth=a.value,e.strokeStyle=i.value,e.lineJoin=e.lineCap="round";var s=new Image;s.onload=function(){e.drawImage(s,s.width-e.canvas.width,s.height-e.canvas.height,e.canvas.width,e.canvas.height,0,0,e.canvas.width,e.canvas.height)},s.src=f}()},d=function(t){var e=t.touches[0];"seHandle"===e.target.id&&(n=!0),"nwHandle"===e.target.id&&(l=!0)},v=function(a){var i=a.touches[0];if(n===!0){a.preventDefault();var h=t.offsetHeight-(t.offsetHeight+t.offsetTop-i.clientY),c=t.offsetWidth-(t.offsetWidth+t.offsetLeft-i.clientX);t.style.height=h+"px",t.style.width=c+"px",f.style.top=t.offsetTop-f.offsetHeight+"px",f.style.left=t.offsetLeft-f.offsetWidth+"px",s.style.top=t.offsetTop+t.offsetHeight+"px",s.style.left=t.offsetLeft+t.offsetWidth+"px",o.style.top=t.offsetTop-o.offsetHeight+"px",o.style.left=(t.offsetWidth-o.offsetWidth)/2+t.offsetLeft+"px"}else if(l===!0){a.preventDefault();var p=t.offsetLeft-(t.offsetLeft-i.clientX),d=t.offsetTop-(t.offsetTop-i.clientY),v=t.offsetWidth+(t.offsetLeft-p),r=t.offsetHeight+(t.offsetTop-d),u=canvas.offsetLeft+(t.offsetLeft-p),g=canvas.offsetTop+(t.offsetTop-d);t.style.left=p+"px",t.style.top=d+"px",t.style.width=v+"px",t.style.height=r+"px",e.canvas.style.left=u+"px",e.canvas.style.top=g+"px",f.style.top=t.offsetTop-f.offsetHeight+"px",f.style.left=t.offsetLeft-f.offsetWidth+"px",s.style.top=t.offsetTop+t.offsetHeight+"px",s.style.left=t.offsetLeft+t.offsetWidth+"px",o.style.top=t.offsetTop-o.offsetHeight+"px",o.style.left=(t.offsetWidth-o.offsetWidth)/2+t.offsetLeft+"px"}},r=function(f){n===!0?!function(){n=!1;var f=e.canvas.toDataURL();e.canvas.width=t.offsetWidth,e.canvas.height=t.offsetHeight,e.fillStyle="#ffffff",e.fillRect(0,0,e.canvas.width,e.canvas.height),e.lineWidth=a.value,e.strokeStyle=i.value,e.lineJoin=e.lineCap="round";var s=new Image;s.onload=function(){e.drawImage(s,0,0,e.canvas.width,e.canvas.height,0,0,e.canvas.width,e.canvas.height)},s.src=f}():l===!0&&!function(){l=!1;var f=e.canvas.toDataURL();e.canvas.width=t.offsetWidth,e.canvas.height=t.offsetHeight,e.canvas.style.left="0px",e.canvas.style.top="0px",e.fillStyle="#ffffff",e.fillRect(0,0,e.canvas.width,e.canvas.height),e.lineWidth=a.value,e.strokeStyle=i.value,e.lineJoin=e.lineCap="round";var s=new Image;s.onload=function(){e.drawImage(s,s.width-e.canvas.width,s.height-e.canvas.height,e.canvas.width,e.canvas.height,0,0,e.canvas.width,e.canvas.height)},s.src=f}()};s.addEventListener("mousedown",h,{capture:!1}),f.addEventListener("mousedown",h,{capture:!1}),document.addEventListener("mousemove",c,{capture:!1}),document.addEventListener("mouseup",p,{capture:!1}),s.addEventListener("touchstart",d,{capture:!1}),f.addEventListener("touchstart",d,{capture:!1}),document.addEventListener("touchmove",v,{capture:!1,passive:!1}),document.addEventListener("touchend",r,{capture:!1})}